---
slug: rmangal
title: 'rmangal: making ecological networks easily accessible'
date: 2019-10-12
authors:
  - Kevin Cazelles
  - Steve Vissault
categories: blog
topicid: 1848
tags:
  - Software Peer Review
  - R
  - packages
  - data
  - data access
  - ecology
  - ecological networks
  - API
  - API client
  - Mangal
  - rmangal
---



In early September, the version 2.0.0 of [rmangal][rmangal] was approved by
rOpenSci, four weeks latter it made the CRAN. Following-up on our experience we detail below the reasons why we wrote rmangal, why we submitted our package to rOpenSci and how the peer-review improve our package.



### Mangal: a data base of published ecological networks

<!-- HERE WHAT IS IN  -->

Ecological networks are set of species populations (the nodes of the network)
connected through ecological interactions (the edges). Interactions are
ecological processes in which one species affects another. Predation is probably the most known kind of interaction, but there are also various non-trophic interactions. For instance, when a mammal unintentionally disperses a seed that somehow landed on its hairs, it is a non-trophic interaction. Within a ecological network, all kind of  interactions occur simultaneously, making them as complex as fascinating. For instance, when a bird eats a berry from a bush and defecates the seeds further away, it is a two-way interaction: one trophic a bird eats a berry, one non-trophic a seed has been dispersed.

Ecologists are currently compiling datasets to explore how the structure of
ecological interactions (i.e. how interaction are disturbed in the network) vary
over environmental gradients (e.g. latitudinal gradient). This is a fundamental
research question with an applied perspective as research in this area should
help us understanding how ecological networks will respond to global change. To
this end, the Mangal project <https://mangal.io/#/> led by [Timothée
Poisot](https://poisotlab.io/), [Steve Vissault](https://steveviss.github.io/)
and [Dominique Gravel](https://ielab.recherche.usherbrooke.ca/) standardizes
published ecological networks and ease their access. For all datasets, Mangal
includes:

- the details of the original publication;
- a description of all networks included in the original publication;

Moreover, for all networks, Mangal includes:

- details about all species of the network, notably several taxonomic identifiers;
- information about the interactions, notably their type.

Currently, Mangal includes 172 datasets, which represents over 1300 ecological networks.



### An R client to make ecological networks easily accessible


In 2016, the first paper describing the project was published[^original_ref] and
introduced a [first version of
rmangal](https://github.com/mangal-wg/rmangal-v1). In 2018, a substantial effort
was put in order to improve the data structure and the web API has been
rewritten and a new website was launched.

{{< figure src="/img/blog-images/2019-10-22-rmangal/mangal_explorer.png"
 alt="write an alternative text describing the information contained in the image" width="100%" >}}


Because of all these modifications, the first version of rmangal, the R client
for the web API, was obsolete and a new version needed. It is worth explaining
here why the R client is an important component of the Mangal project. Even
though Mangal comes with a documented [RESTful API](https://mangal.io/doc/api/),
this is a technology that is not commonly used as such by ecologists. On the
contrary, R is a very popular programming langage among ecologists, therefore
providing a R client ensures that the community that built this knowledge can
access them, as easily as possible. The same arguments hold true for the [Julia
client](https://mangal.io/doc/jl/) that [Timothée Poisot](https://poisotlab.io/)
wrote because [Julia](https://julialang.org/) is increasingly popular among
theoreticians, that can test theory with such datasets.

We had two main objectifs for [rmangal 2.0.0][rmangal]. First, rmangal had to
allow users to search for all entries in the data base in a very flexible way.
From a technical point this meant that we had to write functions to query all
the endpoints of the [new web API][API]. The second goal was to make the package
as easy to use as possible. To do so, we used explicit and consistent names for
functions and arguments, designed a simple workflow, and documented how to use
other related packages (such as [igraph][igraph]) to go further. With these goals in mind, we started to code.



### A successful peer-review process


<!-- version to prerelease -->
After some hard work behind the screen and once we deemed our two objectifs
achieved, we decided to submit rmangal package to rOpenSci for peer-review. We
did so because we needed feedback, we needed qualified people to critically
assess whether our two objectifs were achieved. Given the strong expertise of
rOpenSci in software review, and given that our package was in-scope, submitting
rmangal to rOpenSci was an obvious choice.


We [had very valuable
feedback](https://github.com/ropensci/software-review/issues/332) from [Anna
Willoughby][arw36] and [Thomas Lin Pedersen][thomasp85]. They carefully assessed
our work and pointed out areas where improvement was required. One good example
of how their review made our package better concerns the set of dependencies. We
originally listed [sf][sf] in `Imports` as we used it to filter networks based
on geographic coordinates. This was actually more a "comfort feature" than an
essential part of the package and, as mentioned by the reviewers, [sf][sf] has
many dependencies. The reviewers made us realize that for one extra feature, we
were increasing substantially the number of indirect dependencies. Hence,.
following the reviewers' suggestions, we moved [sf][sf] to `Suggests` and add a
message to warn users that to use the [spatial filtering
feature](https://ropensci.github.io/rmangal/articles/rmangal.html#geolocalize-mangal-networks-with-sf),
sf is required. Similarly, based on the reviewers comments, we added a function
to convert Mangal networks into [tidygraph][tidygraph] objects and we documented
how to plot Mangal networks with [ggraph][ggraph] (and so we addeed those
package under the `Suggests` field). Such improvements were very helpful to
properly connect rmangal to the existing ecosystem of R package. The plethora of
R packages is a major strength of R, and connecting your package properly to other makes the ecosystem even stronger.


<!-- Future -->
We are very satisfied with rmangal 2.0.0 and we did our best to explain how to
use it in the vignette ["get started with
rmangal"](ttps://ropensci.github.io/rmangal/articles/rmangal.html). We are now
looking for feedback from users, not only for rmangal but also for the web API
and the website. We welcome suggestions and contributions, especially for the
documentation. In the future, we envision that rmangal will integrate functions
to format ecological networks for ecologists willing to add their datasets to
Mangal. This could be very well be the next a major release of rmangal!

<!-- The addition of new entries from anyone would require an evaluation of
the datasets submitted.  Based on the success of the software submission
rOpenSci, we could use a similar handle (at a smaller sclae) to the submission
of new ecological network. -->


<!-- The package rmangal allows users to search for ecological networks in a flexible
way and to retrieve ecological networks that are formatted, so that they can
directly analyze them. Moreover, to make rmangal even more powerful, we added
functions to convert Mangal networks into [igraph][igraph] and
[tidygraph][tidygraph] objects. Also, it is really useful to filter ecological
using [sf][sf] and visualize
them with [ggraph][ggraph]. All these aspects are covered in the vignette ["get
started with rmangal"](ttps://ropensci.github.io/rmangal/articles/rmangal.html).
 -->

### Acknowledgments

We would like to thanks [Anna Willoughby][arw36] and [Thomas
Lin Pedersen][thomasp85] for thorough reviews that greatly contribute to improve
rmangal, [Noam Ross](https://github.com/noamross) for handling the review
process. We are also thankful to all [contributors to
rmangal](https://github.com/ropensci/rmangal/graphs/contributors) and to all
ecologists that have spent countless hours in collecting data that Mangal is
compiling.






[^original_ref]: Poisot, T. et al. mangal - making ecological network analysis simple. Ecography 39, 384–390 (2016).


[arw36]: https://github.com/arw36
[thomasp85]: https://github.com/thomasp85
[igraph]: https://igraph.org/r/
[tidygraph]: https://tidygraph.data-imaginist.com/
[ggraph]:https://ggraph.data-imaginist.com/
[rmangal]: https://ropensci.github.io/rmangal/
[API]: https://mangal.io/doc/api/
[sf]: https://cran.r-project.org/web/packages/sf/index.html
