---
slug: "rromeo"
title: Access Publisher Copyright & Self-Archiving Policies via the 'SHERPA/RoMEO' API
package_version: 0.1.0
authors:
  - Matthias Greni√©
  - Hugo Gruson
date: '2019-6-4'
categories: blog
topicid:
tags:
- Software Peer Review
- R
- community
- software
- packages
- rromeo
- SHERPA/RoMEO
- API
- open access
- scientific publications
- preprint
- postprint
---

We've been following rOpenSci for a long time, using several packages in our projects. The thorough package review process greatly improves the quality of the packages that join the rOpenSci ecosystem. It is a great community to learn and develop new ideas, especially regarding scientifc packages.
As we admired the dynamics of rOpenSci community, we wanted to contribute to this ecosystem. So we first thought about the kind of project that could fit rOpenSci goals, and in the same time, teach us new things.
As young researchers, we know how much a scientific article can benefit from a detailed and helpful review. We were really curious to see what kind of new outlook on our work reviewers would bring here.

Open Access is the idea that scientific articles should be accessible to anyone to favour scientific dissemination, as well as public information. Open Access is rising in the scientific community with more and more public funding agencies requiring funded projects to make their article open access. Several models exist to foster Open Access. One way that open access can be done is the so-called ["green open-access"](https://en.wikipedia.org/wiki/Open_access#Green_OA) meaning that the articles are deposited by their authors and made publicly available through instutional or public repositories, such as [bioRxiv](https://www.biorxiv.org), [HAL](https://hal.archives-ouvertes.fr/) [](). Scientific journals have different policies regarding green open-access: some of them let you archive different versions of the manuscript right after acceptance while some others ask you to wait an embargo period, some forbid entirely the archival of the manuscript. In order to favour open-access of article scientists can choose to publish in journals that authorize such archival. That's where [SHERPA/RoMEO](http://sherpa.ac.uk/romeo/index.php) comes in handy, SHERPA/RoMEO is a publicly available database of open access policies of scientific journals. It indexes the conditions at which each journal let you (or not) host manuscript versions.

The SHERPA/RoMEO database is available through an API, so we thought we could build an R client to this API to make it accessible for individual scientists to select journals based on their manuscript archival policies. Also these data can be used by bibliometricians to get the general picture of open access practices among journals of a particular subfield.

## SHERPA/RoMEO API

SHERPA/RoMEO has been available through a web interface since February 2004 according to the Internet Archive. Their API has been available since December 2006 (from the Internet Archive <https://web.archive.org/web/20061211125806/http://www.sherpa.ac.uk:80/romeo.php>). Making their data available to anyone since then. However, at that time the API standards hadn't diffused as much as today. The development of the RoMEO API seems to have stopped since 2013 even though the database is still updated.

One difficulty arose from the fact that the API does not always follow modern web standards. This meant that some R packages could not be readily used but needed small adjustments first (e.g. UTF-8 vs latin-1, not declared via header; not proper XML)

Contrary to many modern APIs SHERPA/RoMEO is not RESTful, making the syntax a little more complex.
Return XML -> xml2 package

There is even a [wishlist of functionalities regarding the API](http://sherpa.ac.uk/romeo/API-Wishlist-2012-10.html).

Difficulty of the API that does not output all the information regarding a single journal when querying it -> Recursive function but

## rromeo: an R API client

Accessing journal information, example of functions.
Accessing publishers information.

Point to the vignette

## Developing an API package: lessons learned?

What we learned

   * use [vcr] to mock requests and have tests, [nice book](https://ropenscilabs.github.io/http-testing-book/) with examples to show you how to mock requests
   * use an API key and help the user store it (see our vignette that explains all the different ways to do it)
   * define a user-agent so that the maintainers from the API know where the calls come from (thanks to @brunaw)
   * use httpbin to test your requests and make sure they are retrieving what you think they are
   * fresh look thanks to review: it probably doesn't make sense for the output to be drastically different depending on a single argument (multiple = TRUE/FALSE)

Thanks to the reviewers

While working on rromeo, we realised that one of the major difficulties of developing an R API package was to decide the level of details offered to the user: if too high level, not flexible enough. If too low level, untractable. We were greatly inspired by the many packages developed by Scott Chamberlain that sometimes ofer two different interfaces for different kind of users (see [rredlist] for example). This strategy may be useful to offer different kind of granularity of information on details depending on the future use of the API information.

There exist many resources to develop API packages that we recommend to people who would like to develop one!:

   * [httr] vignette
   * Scott Chamberlain book
   * ?
   
## Giving back to the community

[vcr] and [webmockr] are recent rOpenSci packages that have mainly been used by a handful of developers until now, one of them being rOpenSci co-founder Scott Chamberlain. Scott often uses crul in his API packages while we used httr for rromeo. Both httr and crul have very similar goals but slightly different philosophies. We were able to identify issues with [vcr] and [webmockr] when used with [httr].

Reach out to the API developers to suggest updates?

## The future

rromeo is both on GitHub and CRAN now. It seems quite stable as it is now. There is more data in the SHERPA/RoMEO database that could be extracted especially regarding paid open access (<http://www.sherpa.ac.uk/romeo/PaidOA.php>). We'll be glad to add more functionality needed

We enjoyed the experience of contributing to rOpenSci, benefitting from great recommandations by the editor and reviewers of our package, as well as discovering bugs in lesser used package along the way.

We are now moving to another package that we plan to submit to rOpenSci. We'll be using some of the know we're moving to a new project, also an API package but bigger and hope to be back soon on the rOpenSci blog to talk about that ;)

## Acknowledgements

We would like to thank both of the reviewers of the rromeo package as well as the editor for their input to improve the documentation and the package.
We also want to mention Scott Chamberlain for building so many in tools to make the interactions with API easier ([vcr], [webmockr], crul, as well as many API packages that can be used as examples for developing your own API package).

- [httr]: https://github.com/r-lib/httr
- [rredlist]: https://github.com/ropensci/rredlist
- [vcr]: https://github.com/ropensci/vcr
- [webmockr]: https://github.com/ropensci/webmockr
