---
slug: "orcid"
title: "Distinguish yourself in CRAN person() with ORCID"
date: 2018-10-08
authors:
  - name: Maëlle Salmon
categories:
  - technotes
tags:
- orcid
- rorcid
- desc
output: 
  md_document:
    variant: markdown_github
    preserve_yaml: true
---

Proper identification of individuals is crucial for acknowledging and
studying their scientific work, be it journal articles or pieces of
software. In this tech note, one year after CRAN started supporting
ORCIDs, we shall explain why and how to use unique author identifiers in
the DESCRIPTION files.

Why ORCIDs on CRAN?
-------------------

When analyzing the authorship of CRAN packages, one can look at authors’
names and email addresses. Names can be written with and without quotes,
email addresses change, which makes it all tricky as [noted by David
Smith when he looked for the most prolific CRAN
authors](http://blog.revolutionanalytics.com/2018/03/the-most-prolific-package-maintainers-on-cran.html)
(notice our very own Scott Chamberlain and Jeroen Ooms in that
scoreboard by the way?). Besides, several people can have the same name!

So all in all, using an unique ID per author makes sense. That’s
something offered for the academic world and beyond by
[ORCID](https://www.crossref.org/community/orcid/). Anyone can set up an
ORCID account for free and link it up to the rest of their online
persona, as well as to their employment and works.

About one year ago, CRAN added [support for
ORCID](https://twitter.com/AchimZeileis/status/917319708713668608) in
DESCRIPTION files by [a minimally invasive
hack](https://twitter.com/AchimZeileis/status/917660536459939840). One
can add the ORCID ID of an author as a `comment` field in `person()`,
see e.g. [Carl Boettiger’s ID in `codemetar`
DESCRIPTION](https://github.com/ropensci/codemetar/blob/387456e9d62fdb9be936a089d7173e8d21d783b8/DESCRIPTION#L10)
and one gets a nice little green bubble near their name on CRAN, see
e.g. [`codemetar` CRAN
page](https://cran.r-project.org/web/packages/codemetar/index.html).

``` r
webshot::webshot("https://cran.r-project.org/web/packages/codemetar/index.html",
                 cliprect = "viewport")
```

![screenshot of
<https://cran.r-project.org/web/packages/codemetar/index.html>](/img/blog-images/2018-10-08-orcid/codemetar-1.png)

The advantages of using ORCID IDs in DESCRIPTION are:

-   **Unique identifiers for free!** Sure, there’s no verification so
    someone could use your identity, but at least, it should help
    assigning your own work to you.

-   **Clickable name on CRAN pages!** E.g. when clicking on Carl’s green
    bubble on `codemetar` CRAN page, one gets to [his ORCID
    profile](https://orcid.org/0000-0002-1642-628X) including a link to
    his personal website.

``` r
webshot::webshot("https://orcid.org/0000-0002-1642-628X",
                 cliprect = "viewport")
```

![screenshot of
<https://orcid.org/0000-0002-1642-628X>](/img/blog-images/2018-10-08-orcid/carl-1.png)

Even for non academics, making one’s online persona more accessible from
a CRAN DESCRIPTION can’t hurt.

How to add ORCIDs to DESCRIPTION?
---------------------------------

So, how does one add add and interact with ORCID in DESCRIPTION? Well,
thankfully, the current dev version of the RStudio [`desc`
package](https://github.com/r-lib/desc), has some direct support of
ORCIDs!

``` r
remotes::install_github("r-lib/desc")
```

### Search authors by ORCID

`desc` offers many functions for manipulating authors: adding or
deleting them or their roles. Now you can perform these operations using
ORCID to identify authors to be modified. E.g. if you want to add a role
to an existing author, say Carl who worked hard enough to earn the “aut”
role, you’d run

``` r
desc::desc_add_role(role = "aut",
                    orcid = "0000-0002-1642-628X")
```

Obviously this very example above has probably little real-life
applicability, but you could imagine manipulating DESCRIPTION files *en
masse* using a table of ORCIDs and new roles.

### Add ORCID to authors of a package

The new `add_orcid()` method and `desc_add_orcid()` functions make it
possible to add ORCID IDs to authors directly instead of via the
`comment` argument. So you could write some script

``` r
desc::desc_add_orcid("0000-0002-2815-0399",
                     given = "Maëlle",
                     family = "Salmon")
```

and run it inside all your local package folders to add your ORCID. It
will add this ORCID ID to the author whose given name is “Maëlle” and
whose family name is “Salmon”. If you only write

``` r
desc::desc_add_orcid("0000-0002-2815-0399",
                     given = "Maëlle")
```

and there are two Maëlle’s, the function will error and you’ll need to
run it with more specific arguments.

### Add all of *your* identity at once!

The coolest feature of `desc` ORCID support might be that
`desc::desc_add_me()` will now use the ORCID of the environment variable
`ORCID_ID` if you created it. Hence, once per machine it’d now be
recommended to

-   install the `whoami` package necessary for `desc::desc_add_me()` to
    work. `install.packages("whoami")`.

-   create an environment variable `ORCID_ID`, editing `.Renviron` by
    calling e.g. `usethis::edit_r_environ()`. Here’s how the
    corresponding line looks for me:

``` r
ORCID_ID="0000-0002-2815-0399"
```

`desc::desc_add_me()` looks for your name and email addresses in your
existing configuration (git configuration, GitHub profile), see [the
`whoami` package docs](https://github.com/r-lib/whoami). So say you’ve
just been told to add yourself as contributor of a package you’ve just
improved: inside the package directory, you’d just need to run
`desc::desc_add_me()` and voilà ! No risk to wrongly copy-paste your
ORCID.

As a conclusion of this section, not only are ORCIDs useful, but they’re
getting citizen status in the world of as-automatic-as-possible package
development. Now, we shall see how one could use ORCIDs inside R to
gather information about package authors.

How to study CRAN authors via their ORCID
-----------------------------------------

As mentioned earlier, rOpenSci’s Scott Chamberlain is the [most prolific
CRAN package
maintainer](http://blog.revolutionanalytics.com/2018/03/the-most-prolific-package-maintainers-on-cran.html),
so perhaps unsurprisingly, he maintains a package interacting with
ORCID’s API, [`rorcid`](https://github.com/ropensci/rorcid)!

The API requires authentication so the first step after installing the
package is to run:

``` r
rorcid::orcid_auth()
```

and to save the resulting token as an `ORCID_TOKEN` environment variable
in .Renviron.

Then, using `rorcid` one can access all the works of someone, or more
prosaically their identity. Take `codemetar`’s DESCRIPTION file.

``` r
download.file("https://raw.githubusercontent.com/ropensci/codemetar/master/DESCRIPTION",
              "codemetar_DESCRIPTION")
codemetar_desc <- desc::desc("codemetar_DESCRIPTION")
```

For all authors we can extract the ORCID.

``` r
get_orcid <- function(person){
  if(is.null(names(person$comment))){
    NULL
  }
  
  if(!"ORCID" %in% names(person$comment)){
    NULL
  }

  person$comment["ORCID"]
}

codemetar_orcids <- purrr::map(codemetar_desc$get_authors(),
                                   get_orcid)

codemetar_orcids <- unlist(codemetar_orcids)
codemetar_orcids <- codemetar_orcids[!is.na(codemetar_orcids)]
```

Then for the authors with ORCID ID, we can use `rorcid` to get a glimpse
of their profile.

``` r
rorcid::as.orcid(codemetar_orcids)
```

    ## $ORCID
    ## <ORCID> 0000-0002-1642-628X
    ##   Name: Boettiger, Carl
    ##   URL (first): http://www.carlboettiger.info
    ##   Country: US
    ##   Keywords: Ecology, Evolution, Regime Shifts, Stochastic Dynamics
    ## 
    ## $ORCID
    ## <ORCID> 0000-0002-2378-4915
    ##   Name: Krystalli, Anna
    ##   URL (first): http://annakrystalli.com/
    ##   Country: GB
    ##   Keywords: Macroecology, Computational ecology, Reproducibility, Research software engineering, Research data management, Reproducibility, Open Science
    ## 
    ## $ORCID
    ## <ORCID> 0000-0003-4580-091X
    ##   Name: Allen, Toph
    ##   URL (first): http://toph.io
    ##   Country: US
    ##   Keywords: 
    ## 
    ## $ORCID
    ## <ORCID> 0000-0002-2815-0399
    ##   Name: Salmon, Maëlle
    ##   URL (first): http://masalmon.eu/
    ##   Country: FR
    ##   Keywords: 
    ## 
    ## $ORCID
    ## <ORCID> 0000-0002-2136-0000
    ##   Name: Ross, Noam
    ##   URL (first): 
    ##   Country: US
    ##   Keywords: Ecology, Economics, Forecasting
    ## 
    ## $ORCID
    ## <ORCID> 0000-0002-4035-0289
    ##   Name: Ooms, Jeroen
    ##   URL (first): https://github.com/jeroen
    ##   Country: NL
    ##   Country: US
    ##   Keywords:

Further work could include looking at ORCID information over more CRAN
packages, but for that, it’s first and foremost important to spread the
word about ORCID so that they get used more!

*Side-note, how would one analyze stuff over the whole CRAN collection?*

-   *Some information can be found in `tools::CRAN_package_db()` as seen
    in [this recent tech
    note](https://ropensci.org/technotes/2018/09/10/github-badges/).*

-   *There’s [an official read-only mirror of each all CRAN packages on
    GitHub](https://github.com/cran) thanks to METACRAN.*

-   *METACRAN serves a [CRAN package
    database](https://r-pkg.org/services#crandb), wrapped by an R
    package of course.*

-   *One could try setting up a local CRAN mirror.*

Conclusion
----------

In this tech note we made the case for using ORCID IDs as identifiers
for the authors of packages, for academics and non-academics as well. We
described the current `desc` support for ORCID. We also gave a small
insight into the wealth of information one can get via `rorcid`.

For academics, another aspect of making their software contributions
valuable is getting the software they write as work inside their ORCID
profile. One can do that by hand, but one can also

-   get a legit DOI for each package release by activating
    [Zenodo](https://zenodo.org/) for the repository,

-   write a software paper, e.g. via [JOSS](https://joss.theoj.org/).

But this is probably a topic for another time… In the meantime, let’s
hope ORCID IDs will be more adopted by academics and non-academics alike
for:

-   Making CRAN package authors’ easier to identify and their online
    persona easier to find.

-   Making academic CRAN package authors’ scientific contributions
    easier to access when studying packages.
